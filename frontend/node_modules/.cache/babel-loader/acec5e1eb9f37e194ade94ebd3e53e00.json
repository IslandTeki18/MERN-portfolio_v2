{"ast":null,"code":"import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import _regeneratorRuntime from\"/Users/landonmckell/PracticeProjects/Portfolio/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/landonmckell/PracticeProjects/Portfolio/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"/Users/landonmckell/PracticeProjects/Portfolio/frontend/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import axios from\"axios\";import{useEffect,useState}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{listProjectDetails,updateProject}from\"../actions/projectActions\";import{PROJECT_UPDATE_RESET}from\"../constants/projectConstants\";var AdminProjectEditScreen=function AdminProjectEditScreen(_ref){var match=_ref.match,history=_ref.history;var projectId=match.params.id;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),title=_useState2[0],setTitle=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),shortDescription=_useState4[0],setShortDescription=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),longDescription=_useState6[0],setLongDescription=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),img=_useState8[0],setImg=_useState8[1];var _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),trelloUrl=_useState10[0],setTrelloUrl=_useState10[1];var _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),githubUrl=_useState12[0],setGithubUrl=_useState12[1];var _useState13=useState(\"\"),_useState14=_slicedToArray(_useState13,2),projectUrl=_useState14[0],setProjectUrl=_useState14[1];var _useState15=useState([\"\"]),_useState16=_slicedToArray(_useState15,2),frontendStack=_useState16[0],setFrontendStack=_useState16[1];var _useState17=useState([\"\"]),_useState18=_slicedToArray(_useState17,2),backendStack=_useState18[0],setBackendStack=_useState18[1];var _useState19=useState([\"\"]),_useState20=_slicedToArray(_useState19,2),databaseStack=_useState20[0],setDatabaseStack=_useState20[1];var _useState21=useState(false),_useState22=_slicedToArray(_useState21,2),uploading=_useState22[0],setUploading=_useState22[1];// New features\nvar _useState23=useState(\"\"),_useState24=_slicedToArray(_useState23,2),status=_useState24[0],setStatus=_useState24[1];var dispatch=useDispatch();var projectDetails=useSelector(function(state){return state.projectDetails;});var loading=projectDetails.loading,error=projectDetails.error,project=projectDetails.project;var projectUpdate=useSelector(function(state){return state.projectUpdate;});var loadingUpdate=projectUpdate.loading,errorUpdate=projectUpdate.error,successUpdate=projectUpdate.success;useEffect(function(){if(successUpdate){dispatch({type:PROJECT_UPDATE_RESET});history.push(\"/admin/viewprojects\");}else{if(!project.title||project._id!==projectId){dispatch(listProjectDetails(projectId));}else{setTitle(project.title);setShortDescription(project.shortDescription);setLongDescription(project.longDescription);setImg(project.img);setTrelloUrl(project.trelloUrl);setGithubUrl(project.githubUrl);setProjectUrl(project.projectUrl);setFrontendStack(project.frontendStack);setBackendStack(project.backendStack);setDatabaseStack(project.databaseStack);setStatus(project.status);}}},[dispatch,history,successUpdate,project,projectId]);var uploadFileHandler=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(e){var file,formData,config,_yield$axios$post,data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:file=e.target.files[0];formData=new FormData();formData.append(\"image\",file);setUploading(true);_context.prev=4;config={headers:{\"Content-Type\":\"multipart/form-data\"}};_context.next=8;return axios.post(\"/api/upload\",formData,config);case 8:_yield$axios$post=_context.sent;data=_yield$axios$post.data;setImg(data);setUploading(false);_context.next=18;break;case 14:_context.prev=14;_context.t0=_context[\"catch\"](4);console.error(_context.t0);setUploading(false);case 18:case\"end\":return _context.stop();}}},_callee,null,[[4,14]]);}));return function uploadFileHandler(_x){return _ref2.apply(this,arguments);};}();var submitHandler=function submitHandler(e){e.preventDefault();dispatch(updateProject({_id:projectId,title:title,shortDescription:shortDescription,longDescription:longDescription,img:img,trelloUrl:trelloUrl,githubUrl:githubUrl,projectUrl:projectUrl,frontendStack:frontendStack,backendStack:backendStack,databaseStack:databaseStack,status:status}));};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-light m-3\",to:\"/admin/viewprojects\",children:\"Go Back\"}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-8 offset-md-2 my-4\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Project Edit\"}),loadingUpdate&&/*#__PURE__*/_jsx(Loader,{}),errorUpdate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorUpdate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"form\",{onSubmit:submitHandler,children:[/*#__PURE__*/_jsx(\"div\",{className:\"form-row mb-2\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"titleInput\",children:\"Title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Title\",value:title,onChange:function onChange(e){return setTitle(e.target.value);}})]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"shortDescInput\",children:\"Short Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Short Description\",rows:\"4\",value:shortDescription,onChange:function onChange(e){return setShortDescription(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"longDescInput\",children:\"Long Description\"}),/*#__PURE__*/_jsx(\"textarea\",{type:\"text\",className:\"form-control\",placeholder:\"Long Description\",rows:\"4\",value:longDescription,onChange:function onChange(e){return setLongDescription(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"ImageInput\",children:\"Choose Image\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Trello URL\",value:img,onChange:function onChange(e){return setImg(e.target.value);}}),/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"form-control\",placeholder:\"File Browser\",onChange:uploadFileHandler})]}),uploading&&/*#__PURE__*/_jsx(Loader,{}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"trelloInput\",children:\"Trello URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Trello URL\",value:trelloUrl,onChange:function onChange(e){return setTrelloUrl(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-row mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"githubInput\",children:\"Github URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Github URL\",value:githubUrl,onChange:function onChange(e){return setGithubUrl(e.target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"col\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"projectInput\",children:\"Project URL\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Project URL\",value:projectUrl,onChange:function onChange(e){return setProjectUrl(e.target.value);}})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"frontendInput\",children:\"Frontend Stack\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Separate with comma and space...\",value:frontendStack,onChange:function onChange(e){return setFrontendStack(e.target.value.split(\",\"));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"backendInput\",children:\"Backend Stack\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Separate with comma and space...\",value:backendStack,onChange:function onChange(e){return setBackendStack(e.target.value.split(\",\"));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"databaseInput\",children:\"Database Stack\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control\",placeholder:\"Separate with comma and space...\",value:databaseStack,onChange:function onChange(e){return setDatabaseStack(e.target.value.split(\",\"));}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"statusInput\",children:\"Project Status\"}),/*#__PURE__*/_jsxs(\"select\",{className:\"custom-select\",id:\"statusInputGroup\",value:status,onChange:function onChange(e){return setStatus(e.target.value);},children:[/*#__PURE__*/_jsx(\"option\",{value:\"Choose...\",children:\"Choose...\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Live\",children:\"Live\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Not Live\",children:\"Not Live\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Under Construction\",children:\"Under Construction\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Remodeling\",children:\"Remodeling\"})]})]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-block btn-primary\",type:\"submit\",children:\"Submit\"})]})]})})})]});};export default AdminProjectEditScreen;","map":{"version":3,"sources":["/Users/landonmckell/PracticeProjects/Portfolio/frontend/src/screens/AdminProjectEditScreen.js"],"names":["axios","useEffect","useState","useDispatch","useSelector","Link","Loader","Message","listProjectDetails","updateProject","PROJECT_UPDATE_RESET","AdminProjectEditScreen","match","history","projectId","params","id","title","setTitle","shortDescription","setShortDescription","longDescription","setLongDescription","img","setImg","trelloUrl","setTrelloUrl","githubUrl","setGithubUrl","projectUrl","setProjectUrl","frontendStack","setFrontendStack","backendStack","setBackendStack","databaseStack","setDatabaseStack","uploading","setUploading","status","setStatus","dispatch","projectDetails","state","loading","error","project","projectUpdate","loadingUpdate","errorUpdate","successUpdate","success","type","push","_id","uploadFileHandler","e","file","target","files","formData","FormData","append","config","headers","post","data","console","submitHandler","preventDefault","value","split"],"mappings":"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","sourcesContent":["import axios from \"axios\";\nimport { useEffect, useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport { listProjectDetails, updateProject } from \"../actions/projectActions\";\nimport { PROJECT_UPDATE_RESET } from \"../constants/projectConstants\";\n\nconst AdminProjectEditScreen = ({ match, history }) => {\n  const projectId = match.params.id;\n\n  const [title, setTitle] = useState(\"\");\n  const [shortDescription, setShortDescription] = useState(\"\");\n  const [longDescription, setLongDescription] = useState(\"\");\n  const [img, setImg] = useState(\"\");\n  const [trelloUrl, setTrelloUrl] = useState(\"\");\n  const [githubUrl, setGithubUrl] = useState(\"\");\n  const [projectUrl, setProjectUrl] = useState(\"\");\n  const [frontendStack, setFrontendStack] = useState([\"\"]);\n  const [backendStack, setBackendStack] = useState([\"\"]);\n  const [databaseStack, setDatabaseStack] = useState([\"\"]);\n  const [uploading, setUploading] = useState(false);\n\n  // New features\n  const [status, setStatus] = useState(\"\");\n\n  const dispatch = useDispatch();\n\n  const projectDetails = useSelector((state) => state.projectDetails);\n  const { loading, error, project } = projectDetails;\n\n  const projectUpdate = useSelector((state) => state.projectUpdate);\n  const {\n    loading: loadingUpdate,\n    error: errorUpdate,\n    success: successUpdate,\n  } = projectUpdate;\n\n  useEffect(() => {\n    if (successUpdate) {\n      dispatch({ type: PROJECT_UPDATE_RESET });\n      history.push(\"/admin/viewprojects\");\n    } else {\n      if (!project.title || project._id !== projectId) {\n        dispatch(listProjectDetails(projectId));\n      } else {\n        setTitle(project.title);\n        setShortDescription(project.shortDescription);\n        setLongDescription(project.longDescription);\n        setImg(project.img);\n        setTrelloUrl(project.trelloUrl);\n        setGithubUrl(project.githubUrl);\n        setProjectUrl(project.projectUrl);\n        setFrontendStack(project.frontendStack);\n        setBackendStack(project.backendStack);\n        setDatabaseStack(project.databaseStack);\n        setStatus(project.status);\n      }\n    }\n  }, [dispatch, history, successUpdate, project, projectId]);\n\n  const uploadFileHandler = async (e) => {\n    const file = e.target.files[0];\n    const formData = new FormData();\n    formData.append(\"image\", file);\n    setUploading(true);\n\n    try {\n      const config = {\n        headers: {\n          \"Content-Type\": \"multipart/form-data\",\n        },\n      };\n\n      const { data } = await axios.post(\"/api/upload\", formData, config);\n\n      setImg(data);\n      setUploading(false);\n    } catch (error) {\n      console.error(error);\n      setUploading(false);\n    }\n  };\n\n  const submitHandler = (e) => {\n    e.preventDefault();\n    dispatch(\n      updateProject({\n        _id: projectId,\n        title,\n        shortDescription,\n        longDescription,\n        img,\n        trelloUrl,\n        githubUrl,\n        projectUrl,\n        frontendStack,\n        backendStack,\n        databaseStack,\n        status,\n      })\n    );\n  };\n\n  return (\n    <>\n      <Link className=\"btn btn-light m-3\" to=\"/admin/viewprojects\">\n        Go Back\n      </Link>\n      <div className=\"container\">\n        <div className=\"row\">\n          <div className=\"col-md-8 offset-md-2 my-4\">\n            <h2>Project Edit</h2>\n            {loadingUpdate && <Loader />}\n            {errorUpdate && <Message variant=\"danger\">{errorUpdate}</Message>}\n            {loading ? (\n              <Loader />\n            ) : error ? (\n              <Message variant=\"danger\">{error}</Message>\n            ) : (\n              <form onSubmit={submitHandler}>\n                <div className=\"form-row mb-2\">\n                  <div className=\"col\">\n                    <label htmlFor=\"titleInput\">Title</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Title\"\n                      value={title}\n                      onChange={(e) => setTitle(e.target.value)}\n                    />\n                  </div>\n                </div>\n                <div className=\"form-row mb-2\">\n                  <div className=\"col\">\n                    <label htmlFor=\"shortDescInput\">Short Description</label>\n                    <textarea\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Short Description\"\n                      rows=\"4\"\n                      value={shortDescription}\n                      onChange={(e) => setShortDescription(e.target.value)}\n                    />\n                  </div>\n                  <div className=\"col\">\n                    <label htmlFor=\"longDescInput\">Long Description</label>\n                    <textarea\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Long Description\"\n                      rows=\"4\"\n                      value={longDescription}\n                      onChange={(e) => setLongDescription(e.target.value)}\n                    />\n                  </div>\n                </div>\n                <div className=\"form-row mb-2\">\n                  <div className=\"col\">\n                    <label htmlFor=\"ImageInput\">Choose Image</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Trello URL\"\n                      value={img}\n                      onChange={(e) => setImg(e.target.value)}\n                    />\n                    <input\n                      type=\"file\"\n                      className=\"form-control\"\n                      placeholder=\"File Browser\"\n                      onChange={uploadFileHandler}\n                    />\n                  </div>\n                  {uploading && <Loader />}\n                  <div className=\"col\">\n                    <label htmlFor=\"trelloInput\">Trello URL</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Trello URL\"\n                      value={trelloUrl}\n                      onChange={(e) => setTrelloUrl(e.target.value)}\n                    />\n                  </div>\n                </div>\n                <div className=\"form-row mb-2\">\n                  <div className=\"col\">\n                    <label htmlFor=\"githubInput\">Github URL</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Github URL\"\n                      value={githubUrl}\n                      onChange={(e) => setGithubUrl(e.target.value)}\n                    />\n                  </div>\n                  <div className=\"col\">\n                    <label htmlFor=\"projectInput\">Project URL</label>\n                    <input\n                      type=\"text\"\n                      className=\"form-control\"\n                      placeholder=\"Project URL\"\n                      value={projectUrl}\n                      onChange={(e) => setProjectUrl(e.target.value)}\n                    />\n                  </div>\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"frontendInput\">Frontend Stack</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Separate with comma and space...\"\n                    value={frontendStack}\n                    onChange={(e) =>\n                      setFrontendStack(e.target.value.split(\",\"))\n                    }\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"backendInput\">Backend Stack</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Separate with comma and space...\"\n                    value={backendStack}\n                    onChange={(e) => setBackendStack(e.target.value.split(\",\"))}\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"databaseInput\">Database Stack</label>\n                  <input\n                    type=\"text\"\n                    className=\"form-control\"\n                    placeholder=\"Separate with comma and space...\"\n                    value={databaseStack}\n                    onChange={(e) =>\n                      setDatabaseStack(e.target.value.split(\",\"))\n                    }\n                  />\n                </div>\n                <div className=\"form-group\">\n                  <label htmlFor=\"statusInput\">Project Status</label>\n                  <select\n                    className=\"custom-select\"\n                    id=\"statusInputGroup\"\n                    value={status}\n                    onChange={(e) => setStatus(e.target.value)}\n                  >\n                    <option value=\"Choose...\">Choose...</option>\n                    <option value=\"Live\">Live</option>\n                    <option value=\"Not Live\">Not Live</option>\n                    <option value=\"Under Construction\">\n                      Under Construction\n                    </option>\n                    <option value=\"Remodeling\">Remodeling</option>\n                  </select>\n                </div>\n                <button className=\"btn btn-block btn-primary\" type=\"submit\">\n                  Submit\n                </button>\n              </form>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default AdminProjectEditScreen;\n"]},"metadata":{},"sourceType":"module"}