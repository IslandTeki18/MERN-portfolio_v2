{"ast":null,"code":"import{jsxs as _jsxs}from\"react/jsx-runtime\";import{jsx as _jsx}from\"react/jsx-runtime\";import{useEffect}from\"react\";import{useDispatch,useSelector}from\"react-redux\";import{Link}from\"react-router-dom\";import Loader from\"../components/Loader\";import Message from\"../components/Message\";import{createNewProject,deleteProject,listProjects}from\"../actions/projectActions\";import{PROJECT_CREATE_RESET}from\"../constants/projectConstants\";import moment from\"moment\";var AdminProjectsListScreen=function AdminProjectsListScreen(_ref){var history=_ref.history;var dispatch=useDispatch();var projectList=useSelector(function(state){return state.projectList;});var loading=projectList.loading,error=projectList.error,projects=projectList.projects;var projectDelete=useSelector(function(state){return state.projectDelete;});var deleteLoading=projectDelete.loading,deleteError=projectDelete.error,deleteSuccess=projectDelete.success;var projectCreate=useSelector(function(state){return state.projectCreate;});var loadingCreate=projectCreate.loading,errorCreate=projectCreate.error,successCreate=projectCreate.success,createdProject=projectCreate.project;var userLogin=useSelector(function(state){return state.userLogin;});var userInfo=userLogin.userInfo;useEffect(function(){dispatch({type:PROJECT_CREATE_RESET});if(!userInfo.isAdmin){history.push(\"/admin/login\");}if(successCreate){history.push(\"/admin/project/\".concat(createdProject._id,\"/edit\"));}else{dispatch(listProjects());}},[dispatch,userInfo,successCreate,history,createdProject,deleteSuccess]);var deleteHandler=function deleteHandler(id){if(window.confirm(\"Are you sure you delete this project?\")){dispatch(deleteProject(id));}};var createProjectHandler=function createProjectHandler(e){dispatch(createNewProject());};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"col-md-10 offset-md-1 my-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col\",children:/*#__PURE__*/_jsx(\"h4\",{children:\"Project List\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col text-right mb-1\",children:/*#__PURE__*/_jsxs(\"button\",{className:\"btn btn-primary\",onClick:createProjectHandler,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fas fa-plus\",style:{fontSize:\"13px\"}}),\" Add Project\"]})}),deleteLoading&&/*#__PURE__*/_jsx(Loader,{}),deleteError&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:deleteError}),loadingCreate&&/*#__PURE__*/_jsx(Loader,{}),errorCreate&&/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:errorCreate}),loading?/*#__PURE__*/_jsx(Loader,{}):error?/*#__PURE__*/_jsx(Message,{variant:\"danger\",children:error}):/*#__PURE__*/_jsxs(\"table\",{className:\"table table-sm table-dark table-striped\",children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Title\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Status\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Last Updated\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Created\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:projects.sort(function(a,b){return b.createdAt.localeCompare(a.createdAt);}).map(function(project){return/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:project._id.substring(18)}),/*#__PURE__*/_jsx(\"td\",{children:project.title}),/*#__PURE__*/_jsx(\"td\",{children:project.status}),/*#__PURE__*/_jsx(\"td\",{children:moment(project.updatedAt).calendar()}),/*#__PURE__*/_jsx(\"td\",{children:moment(project.createdAt).calendar()}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/admin/project/\".concat(project._id,\"/edit\"),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-info btn-sm\",children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-edit\",style:{fontSize:\"19px\"}})})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline-danger btn-sm\",onClick:function onClick(){return deleteHandler(project._id);},children:/*#__PURE__*/_jsx(\"i\",{className:\"far fa-trash-alt\",style:{fontSize:\"20px\"}})})}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(Link,{to:\"/project/\".concat(project._id),children:/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success btn-sm\",children:\"View Details\"})})})]},project._id);})})]})]})})});};export default AdminProjectsListScreen;","map":{"version":3,"sources":["/Users/landonmckell/PracticeProjects/Portfolio/frontend/src/screens/AdminProjectsListScreen.js"],"names":["useEffect","useDispatch","useSelector","Link","Loader","Message","createNewProject","deleteProject","listProjects","PROJECT_CREATE_RESET","moment","AdminProjectsListScreen","history","dispatch","projectList","state","loading","error","projects","projectDelete","deleteLoading","deleteError","deleteSuccess","success","projectCreate","loadingCreate","errorCreate","successCreate","createdProject","project","userLogin","userInfo","type","isAdmin","push","_id","deleteHandler","id","window","confirm","createProjectHandler","e","fontSize","sort","a","b","createdAt","localeCompare","map","substring","title","status","updatedAt","calendar"],"mappings":"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","sourcesContent":["import { useEffect } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { Link } from \"react-router-dom\";\nimport Loader from \"../components/Loader\";\nimport Message from \"../components/Message\";\nimport {\n  createNewProject,\n  deleteProject,\n  listProjects,\n} from \"../actions/projectActions\";\nimport { PROJECT_CREATE_RESET } from \"../constants/projectConstants\";\nimport moment from \"moment\";\n\nconst AdminProjectsListScreen = ({ history }) => {\n  const dispatch = useDispatch();\n\n  const projectList = useSelector((state) => state.projectList);\n  const { loading, error, projects } = projectList;\n\n  const projectDelete = useSelector((state) => state.projectDelete);\n  const {\n    loading: deleteLoading,\n    error: deleteError,\n    success: deleteSuccess,\n  } = projectDelete;\n\n  const projectCreate = useSelector((state) => state.projectCreate);\n  const {\n    loading: loadingCreate,\n    error: errorCreate,\n    success: successCreate,\n    project: createdProject,\n  } = projectCreate;\n\n  const userLogin = useSelector((state) => state.userLogin);\n  const { userInfo } = userLogin;\n\n  useEffect(() => {\n    dispatch({ type: PROJECT_CREATE_RESET });\n    if (!userInfo.isAdmin) {\n      history.push(\"/admin/login\");\n    }\n\n    if (successCreate) {\n      history.push(`/admin/project/${createdProject._id}/edit`);\n    } else {\n      dispatch(listProjects());\n    }\n  }, [\n    dispatch,\n    userInfo,\n    successCreate,\n    history,\n    createdProject,\n    deleteSuccess,\n  ]);\n\n  const deleteHandler = (id) => {\n    if (window.confirm(\"Are you sure you delete this project?\")) {\n      dispatch(deleteProject(id));\n    }\n  };\n\n  const createProjectHandler = (e) => {\n    dispatch(createNewProject());\n  };\n\n  return (\n    <div className=\"container\">\n      <div className=\"row\">\n        <div className=\"col-md-10 offset-md-1 my-4\">\n          <div className=\"col\">\n            <h4>Project List</h4>\n          </div>\n          <div className=\"col text-right mb-1\">\n            <button className=\"btn btn-primary\" onClick={createProjectHandler}>\n              <i className=\"fas fa-plus\" style={{ fontSize: \"13px\" }}></i> Add\n              Project\n            </button>\n          </div>\n          {deleteLoading && <Loader />}\n          {deleteError && <Message variant=\"danger\">{deleteError}</Message>}\n          {loadingCreate && <Loader />}\n          {errorCreate && <Message variant=\"danger\">{errorCreate}</Message>}\n          {loading ? (\n            <Loader />\n          ) : error ? (\n            <Message variant=\"danger\">{error}</Message>\n          ) : (\n            <table className=\"table table-sm table-dark table-striped\">\n              <thead>\n                <tr>\n                  <th scope=\"col\">ID</th>\n                  <th scope=\"col\">Title</th>\n                  <th scope=\"col\">Status</th>\n                  <th scope=\"col\">Last Updated</th>\n                  <th scope=\"col\">Created</th>\n                  <th scope=\"col\"></th>\n                  <th scope=\"col\"></th>\n                  <th scope=\"col\"></th>\n                </tr>\n              </thead>\n              <tbody>\n                {projects\n                  .sort((a, b) => b.createdAt.localeCompare(a.createdAt))\n                  .map((project) => (\n                    <tr key={project._id}>\n                      <th>{project._id.substring(18)}</th>\n                      <td>{project.title}</td>\n                      <td>{project.status}</td>\n                      <td>{moment(project.updatedAt).calendar()}</td>\n                      <td>{moment(project.createdAt).calendar()}</td>\n                      <td>\n                        <Link to={`/admin/project/${project._id}/edit`}>\n                          <button className=\"btn btn-outline-info btn-sm\">\n                            <i\n                              className=\"far fa-edit\"\n                              style={{ fontSize: \"19px\" }}\n                            ></i>\n                          </button>\n                        </Link>\n                      </td>\n                      <td>\n                        <button\n                          className=\"btn btn-outline-danger btn-sm\"\n                          onClick={() => deleteHandler(project._id)}\n                        >\n                          <i\n                            className=\"far fa-trash-alt\"\n                            style={{ fontSize: \"20px\" }}\n                          ></i>\n                        </button>\n                      </td>\n                      <td>\n                        <Link to={`/project/${project._id}`}>\n                          <button className=\"btn btn-success btn-sm\">\n                            View Details\n                          </button>\n                        </Link>\n                      </td>\n                    </tr>\n                  ))}\n              </tbody>\n            </table>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default AdminProjectsListScreen;\n"]},"metadata":{},"sourceType":"module"}